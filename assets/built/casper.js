!function(r){"use strict";r.fn.fitVids=function(t){var e,i,n={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(e=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',e.appendChild(i.childNodes[1])),t&&r.extend(n,t),this.each(function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];n.customSelector&&t.push(n.customSelector);var o=".fitvidsignore";n.ignore&&(o=o+", "+n.ignore);var e=r(this).find(t.join(","));(e=(e=e.not("object object")).not(o)).each(function(){var t,e,i=r(this);0<i.parents(o).length||"embed"===this.tagName.toLowerCase()&&i.parent("object").length||i.parent(".fluid-width-video-wrapper").length||(i.css("height")||i.css("width")||!isNaN(i.attr("height"))&&!isNaN(i.attr("width"))||(i.attr("height",9),i.attr("width",16)),t=("object"===this.tagName.toLowerCase()||i.attr("height")&&!isNaN(parseInt(i.attr("height"),10))?parseInt(i.attr("height"),10):i.height())/(isNaN(parseInt(i.attr("width"),10))?i.width():parseInt(i.attr("width"),10)),i.attr("name")||(e="fitvid"+r.fn.fitVids._count,i.attr("name",e),r.fn.fitVids._count++),i.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*t+"%"),i.removeAttr("height").removeAttr("width"))})})},r.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(t){t.addEventListener("DOMContentLoaded",function(){t.querySelectorAll(".kg-gallery-image img").forEach(function(t){var e=t.closest(".kg-gallery-image"),i=t.attributes.width.value/t.attributes.height.value;e.style.flex=i+" 1 0%"})})}((window,document)),function(e,i){var o,n,r,s,a,l,c,h=i.querySelector("link[rel=next]");function d(){if(404===this.status)return e.removeEventListener("scroll",u),void e.removeEventListener("resize",p);this.response.querySelectorAll(".post-card").forEach(function(t){o.appendChild(i.importNode(t,!0))});var t=this.response.querySelector("link[rel=next]");t?h.href=t.href:(e.removeEventListener("scroll",u),e.removeEventListener("resize",p)),c=i.documentElement.scrollHeight,s=r=!1}function t(){var t;s||(a+l<=c-n?r=!1:(s=!0,(t=new e.XMLHttpRequest).responseType="document",t.addEventListener("load",d),t.open("GET",h.href),t.send(null)))}function m(){r||e.requestAnimationFrame(t),r=!0}function u(){a=e.scrollY,m()}function p(){l=e.innerHeight,c=i.documentElement.scrollHeight,m()}!h||(o=i.querySelector(".post-feed"))&&(s=r=!(n=300),a=e.scrollY,l=e.innerHeight,c=i.documentElement.scrollHeight,e.addEventListener("scroll",u,{passive:!0}),e.addEventListener("resize",p),m())}(window,document),function(s,a){s.Casper||(s.Casper={}),s.Casper.stickyNavTitle=function(t){var e=a.querySelector(t.navSelector),i=a.querySelector(t.titleSelector),o=s.scrollY,n=!1;function r(){i.getBoundingClientRect().top+s.scrollY+(i.offsetHeight+35)<=o?e.classList.add(t.activeClass):e.classList.remove(t.activeClass),n=!1}s.addEventListener("scroll",function(){o=s.scrollY,function(){n||requestAnimationFrame(r);n=!0}()},{passive:!0}),r()}}(window,document),function(a){"use strict";function t(){this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=a(document),this._$window=a(window),this._$body=a(document.body),this._boundClick=a.proxy(this._clickHandler,this)}function l(t){this._fullHeight=this._fullWidth=this._overlay=this._targetImageWrap=null,this._targetImage=t,this._$body=a(document.body)}t.prototype.listen=function(){this._$body.on("click",'[data-action="zoom"]',a.proxy(this._zoom,this))},t.prototype._zoom=function(t){var e=t.target;if(e&&"IMG"==e.tagName&&!this._$body.hasClass("zoom-overlay-open"))return t.metaKey||t.ctrlKey?window.open(t.target.getAttribute("data-original")||t.target.src,"_blank"):void(e.width>=a(window).width()-l.OFFSET||(this._activeZoomClose(!0),this._activeZoom=new l(e),this._activeZoom.zoomImage(),this._$window.on("scroll.zoom",a.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",a.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",a.proxy(this._touchStart,this)),document.addEventListener?document.addEventListener("click",this._boundClick,!0):document.attachEvent("onclick",this._boundClick,!0),"bubbles"in t?t.bubbles&&t.stopPropagation():t.cancelBubble=!0))},t.prototype._activeZoomClose=function(t){this._activeZoom&&(t?this._activeZoom.dispose():this._activeZoom.close(),this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null)},t.prototype._scrollHandler=function(t){null===this._initialScrollPosition&&(this._initialScrollPosition=a(window).scrollTop());var e=this._initialScrollPosition-a(window).scrollTop();40<=Math.abs(e)&&this._activeZoomClose()},t.prototype._keyHandler=function(t){27==t.keyCode&&this._activeZoomClose()},t.prototype._clickHandler=function(t){t.preventDefault?t.preventDefault():event.returnValue=!1,"bubbles"in t?t.bubbles&&t.stopPropagation():t.cancelBubble=!0,this._activeZoomClose()},t.prototype._touchStart=function(t){this._initialTouchPosition=t.touches[0].pageY,a(t.target).on("touchmove.zoom",a.proxy(this._touchMove,this))},t.prototype._touchMove=function(t){10<Math.abs(t.touches[0].pageY-this._initialTouchPosition)&&(this._activeZoomClose(),a(t.target).off("touchmove.zoom"))},l.OFFSET=80,l._MAX_WIDTH=2560,l._MAX_HEIGHT=4096,l.prototype.zoomImage=function(){var t=document.createElement("img");t.onload=a.proxy(function(){this._fullHeight=Number(t.height),this._fullWidth=Number(t.width),this._zoomOriginal()},this),t.src=this._targetImage.src},l.prototype._zoomOriginal=function(){this._targetImageWrap=document.createElement("div"),this._targetImageWrap.className="zoom-img-wrap",this._targetImage.parentNode.insertBefore(this._targetImageWrap,this._targetImage),this._targetImageWrap.appendChild(this._targetImage),a(this._targetImage).addClass("zoom-img").attr("data-action","zoom-out"),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",document.body.appendChild(this._overlay),this._calculateZoom(),this._triggerAnimation()},l.prototype._calculateZoom=function(){this._targetImage.offsetWidth;var t=this._fullWidth,e=this._fullHeight,i=(a(window).scrollTop(),t/this._targetImage.width),o=a(window).height()-l.OFFSET,n=a(window).width()-l.OFFSET,r=t/e,s=n/o;this._imgScaleFactor=t<n&&e<o?i:r<s?o/e*i:n/t*i},l.prototype._triggerAnimation=function(){this._targetImage.offsetWidth;var t=a(this._targetImage).offset(),e=a(window).scrollTop()+a(window).height()/2,i=a(window).width()/2,o=t.top+this._targetImage.height/2,n=t.left+this._targetImage.width/2;this._translateY=e-o,this._translateX=i-n;var r="scale("+this._imgScaleFactor+")",s="translate("+this._translateX+"px, "+this._translateY+"px)";a.support.transition&&(s+=" translateZ(0)"),a(this._targetImage).css({"-webkit-transform":r,"-ms-transform":r,transform:r}),a(this._targetImageWrap).css({"-webkit-transform":s,"-ms-transform":s,transform:s}),this._$body.addClass("zoom-overlay-open")},l.prototype.close=function(){return this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),a(this._targetImage).css({"-webkit-transform":"","-ms-transform":"",transform:""}),a(this._targetImageWrap).css({"-webkit-transform":"","-ms-transform":"",transform:""}),a.support.transition?void a(this._targetImage).one(a.support.transition.end,a.proxy(this.dispose,this)).emulateTransitionEnd(300):this.dispose()},l.prototype.dispose=function(){this._targetImageWrap&&this._targetImageWrap.parentNode&&(a(this._targetImage).removeClass("zoom-img").attr("data-action","zoom"),this._targetImageWrap.parentNode.replaceChild(this._targetImage,this._targetImageWrap),this._overlay.parentNode.removeChild(this._overlay),this._$body.removeClass("zoom-overlay-transitioning"))},a(function(){(new t).listen()})}(jQuery),function(o){"use strict";o.fn.emulateTransitionEnd=function(t){var e=!1,i=this;return o(this).one(o.support.transition.end,function(){e=!0}),setTimeout(function(){e||o(i).trigger(o.support.transition.end)},t),this},o(function(){o.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}()})}(require("jquery"));
//# sourceMappingURL=casper.js.map