!function(r){"use strict";r.fn.fitVids=function(e){var t,o,i={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(t=document.head||document.getElementsByTagName("head")[0],(o=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(o.childNodes[1])),e&&r.extend(i,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&e.push(i.customSelector);var n=".fitvidsignore";i.ignore&&(n=n+", "+i.ignore);var t=r(this).find(e.join(","));(t=(t=t.not("object object")).not(n)).each(function(){var e,t,o=r(this);0<o.parents(n).length||"embed"===this.tagName.toLowerCase()&&o.parent("object").length||o.parent(".fluid-width-video-wrapper").length||(o.css("height")||o.css("width")||!isNaN(o.attr("height"))&&!isNaN(o.attr("width"))||(o.attr("height",9),o.attr("width",16)),e=("object"===this.tagName.toLowerCase()||o.attr("height")&&!isNaN(parseInt(o.attr("height"),10))?parseInt(o.attr("height"),10):o.height())/(isNaN(parseInt(o.attr("width"),10))?o.width():parseInt(o.attr("width"),10)),o.attr("name")||(t="fitvid"+r.fn.fitVids._count,o.attr("name",t),r.fn.fitVids._count++),o.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),o.removeAttr("height").removeAttr("width"))})})},r.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(e){e.addEventListener("DOMContentLoaded",function(){e.querySelectorAll(".kg-gallery-image img").forEach(function(e){var t=e.closest(".kg-gallery-image"),o=e.attributes.width.value/e.attributes.height.value;t.style.flex=o+" 1 0%"})})}((window,document)),function(t,o){var n,i,r,d,a,c,l,m=o.querySelector("link[rel=next]");function s(){if(404===this.status)return t.removeEventListener("scroll",f),void t.removeEventListener("resize",p);this.response.querySelectorAll(".post-card").forEach(function(e){n.appendChild(o.importNode(e,!0))});var e=this.response.querySelector("link[rel=next]");e?m.href=e.href:(t.removeEventListener("scroll",f),t.removeEventListener("resize",p)),l=o.documentElement.scrollHeight,d=r=!1}function e(){var e;d||(a+c<=l-i?r=!1:(d=!0,(e=new t.XMLHttpRequest).responseType="document",e.addEventListener("load",s),e.open("GET",m.href),e.send(null)))}function u(){r||t.requestAnimationFrame(e),r=!0}function f(){a=t.scrollY,u()}function p(){c=t.innerHeight,l=o.documentElement.scrollHeight,u()}!m||(n=o.querySelector(".post-feed"))&&(d=r=!(i=300),a=t.scrollY,c=t.innerHeight,l=o.documentElement.scrollHeight,t.addEventListener("scroll",f,{passive:!0}),t.addEventListener("resize",p),u())}(window,document),function(d,a){d.Casper||(d.Casper={}),d.Casper.stickyNavTitle=function(e){var t=a.querySelector(e.navSelector),o=a.querySelector(e.titleSelector),n=d.scrollY,i=!1;function r(){o.getBoundingClientRect().top+d.scrollY+(o.offsetHeight+35)<=n?t.classList.add(e.activeClass):t.classList.remove(e.activeClass),i=!1}d.addEventListener("scroll",function(){n=d.scrollY,function(){i||requestAnimationFrame(r);i=!0}()},{passive:!0}),r()}}(window,document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).mediumZoom=t()}(this,function(){"use strict";function t(e){return"IMG"===e.tagName}function L(e){return e&&1===e.nodeType}function H(e){return".svg"===(e.currentSrc||e.src).substr(-4).toLowerCase()}function s(e){try{return Array.isArray(e)?e.filter(t):NodeList.prototype.isPrototypeOf(e)?[].slice.call(e).filter(t):L(e)?[e].filter(t):"string"==typeof e?[].slice.call(document.querySelectorAll(e)).filter(t):[]}catch(e){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}}function C(e,t){var o=S({bubbles:!1,cancelable:!1,detail:void 0},t);if("function"==typeof window.CustomEvent)return new CustomEvent(e,o);var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,o.bubbles,o.cancelable,o.detail),n}var S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};return function(e,t){void 0===t&&(t={});var o,n,i=t.insertAt;"undefined"!=typeof document&&(o=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).type="text/css","top"===i&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)))}(".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}"),function e(t,o){function n(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=t.reduce(function(e,t){return[].concat(e,s(t))},[]);return i.filter(function(e){return-1===v.indexOf(e)}).forEach(function(e){v.push(e),e.classList.add("medium-zoom-image")}),c.forEach(function(e){var t=e.type,o=e.listener,n=e.options;i.forEach(function(e){e.addEventListener(t,o,n)})}),E}function i(){function f(){var e,t,o,n,i,r={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},d=void 0,a=void 0;w.container&&(w.container instanceof Object?(d=(r=S({},r,w.container)).width-r.left-r.right-2*w.margin,a=r.height-r.top-r.bottom-2*w.margin):(t=(e=(L(w.container)?w.container:document.querySelector(w.container)).getBoundingClientRect()).width,o=e.height,n=e.left,i=e.top,r=S({},r,{width:t,height:o,left:n,top:i}))),d=d||r.width-2*w.margin,a=a||r.height-2*w.margin;var c=b.zoomedHd||b.original,l=!H(c)&&c.naturalWidth||d,m=!H(c)&&c.naturalHeight||a,s=c.getBoundingClientRect(),u=s.top,f=s.left,p=s.width,h=s.height,v=Math.min(l,d)/p,g=Math.min(m,a)/h,y=Math.min(v,g),z="scale("+y+") translate3d("+((d-p)/2-f+w.margin+r.left)/y+"px, "+((a-h)/2-u+w.margin+r.top)/y+"px, 0)";b.zoomed.style.transform=z,b.zoomedHd&&(b.zoomedHd.style.transform=z)}var p=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).target;return new d(function(t){if(p&&-1===v.indexOf(p))t(E);else if(b.zoomed)t(E);else{if(p)b.original=p;else{if(!(0<v.length))return void t(E);b.original=v[0]}var e,o,n;b.original.dispatchEvent(C("medium-zoom:open",{detail:{zoom:E}})),y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,g=!0,b.zoomed=(i=b.original,r=i.getBoundingClientRect(),d=r.top,a=r.left,c=r.width,l=r.height,m=i.cloneNode(),s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,u=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,m.removeAttribute("id"),m.style.position="absolute",m.style.top=d+s+"px",m.style.left=a+u+"px",m.style.width=c+"px",m.style.height=l+"px",m.style.transform="",m),document.body.appendChild(z),w.template&&(e=L(w.template)?w.template:document.querySelector(w.template),b.template=document.createElement("div"),b.template.appendChild(e.content.cloneNode(!0)),document.body.appendChild(b.template)),document.body.appendChild(b.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),b.original.classList.add("medium-zoom-image--hidden"),b.zoomed.classList.add("medium-zoom-image--opened"),b.zoomed.addEventListener("click",h),b.zoomed.addEventListener("transitionend",function e(){g=!1,b.zoomed.removeEventListener("transitionend",e),b.original.dispatchEvent(C("medium-zoom:opened",{detail:{zoom:E}})),t(E)}),b.original.getAttribute("data-zoom-src")?(b.zoomedHd=b.zoomed.cloneNode(),b.zoomedHd.removeAttribute("srcset"),b.zoomedHd.removeAttribute("sizes"),b.zoomedHd.src=b.zoomed.getAttribute("data-zoom-src"),b.zoomedHd.onerror=function(){clearInterval(o),console.warn("Unable to reach the zoom image target "+b.zoomedHd.src),b.zoomedHd=null,f()},o=setInterval(function(){b.zoomedHd.complete&&(clearInterval(o),b.zoomedHd.classList.add("medium-zoom-image--opened"),b.zoomedHd.addEventListener("click",h),document.body.appendChild(b.zoomedHd),f())},10)):b.original.hasAttribute("srcset")?(b.zoomedHd=b.zoomed.cloneNode(),b.zoomedHd.removeAttribute("sizes"),n=b.zoomedHd.addEventListener("load",function(){b.zoomedHd.removeEventListener("load",n),b.zoomedHd.classList.add("medium-zoom-image--opened"),b.zoomedHd.addEventListener("click",h),document.body.appendChild(b.zoomedHd),f()})):f()}var i,r,d,a,c,l,m,s,u})}var r=1<arguments.length&&void 0!==o?o:{},d=window.Promise||function(e){function t(){}e(t,t)},h=function(){return new d(function(t){!g&&b.original?(g=!0,document.body.classList.remove("medium-zoom--opened"),b.zoomed.style.transform="",b.zoomedHd&&(b.zoomedHd.style.transform=""),b.template&&(b.template.style.transition="opacity 150ms",b.template.style.opacity=0),b.original.dispatchEvent(C("medium-zoom:close",{detail:{zoom:E}})),b.zoomed.addEventListener("transitionend",function e(){b.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(b.zoomed),b.zoomedHd&&document.body.removeChild(b.zoomedHd),document.body.removeChild(z),b.zoomed.classList.remove("medium-zoom-image--opened"),b.template&&document.body.removeChild(b.template),g=!1,b.zoomed.removeEventListener("transitionend",e),b.original.dispatchEvent(C("medium-zoom:closed",{detail:{zoom:E}})),b.original=null,b.zoomed=null,b.zoomedHd=null,b.template=null,t(E)})):t(E)})},a=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).target;return b.original?h():i({target:e})},v=[],c=[],g=!1,y=0,w=r,b={original:null,zoomed:null,zoomedHd:null,template:null};"[object Object]"===Object.prototype.toString.call(t)?w=t:!t&&"string"!=typeof t||n(t),w=S({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},w);var l,m,z=(l=w.background,(m=document.createElement("div")).classList.add("medium-zoom-overlay"),m.style.background=l,m);document.addEventListener("click",function(e){var t=e.target;t!==z?-1!==v.indexOf(t)&&a({target:t}):h()}),document.addEventListener("keyup",function(e){var t=e.key||e.keyCode;"Escape"!==t&&"Esc"!==t&&27!==t||h()}),document.addEventListener("scroll",function(){var e;!g&&b.original&&(e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Math.abs(y-e)>w.scrollOffset&&setTimeout(h,150))}),window.addEventListener("resize",h);var E={open:i,close:h,toggle:a,update:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t;return t.background&&(z.style.background=t.background),t.container&&t.container instanceof Object&&(o.container=S({},w.container,t.container)),t.template&&(e=L(t.template)?t.template:document.querySelector(t.template),o.template=e),w=S({},w,o),v.forEach(function(e){e.dispatchEvent(C("medium-zoom:update",{detail:{zoom:E}}))}),E},clone:function(){return e(S({},w,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))},attach:n,detach:function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];b.zoomed&&h();var n=0<t.length?t.reduce(function(e,t){return[].concat(e,s(t))},[]):v;return n.forEach(function(e){e.classList.remove("medium-zoom-image"),e.dispatchEvent(C("medium-zoom:detach",{detail:{zoom:E}}))}),v=v.filter(function(e){return-1===n.indexOf(e)}),E},on:function(t,o){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return v.forEach(function(e){e.addEventListener("medium-zoom:"+t,o,n)}),c.push({type:"medium-zoom:"+t,listener:o,options:n}),E},off:function(t,o){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return v.forEach(function(e){e.removeEventListener("medium-zoom:"+t,o,n)}),c=c.filter(function(e){return!(e.type==="medium-zoom:"+t&&e.listener.toString()===o.toString())}),E},getOptions:function(){return w},getImages:function(){return v},getZoomedImage:function(){return b.original}};return E}});
//# sourceMappingURL=casper.js.map