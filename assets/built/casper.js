/*!
* FitVids 1.3
*
*
* Copyright 2017, Chris Coyier + Dave Rupert + Ghost Foundation
* This is an unofficial release, ported by John O'Nolan
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the MIT license
*
*/
!function(e){"use strict";e.fn.fitVids=function(t){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("div");n.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',r.appendChild(n.childNodes[1])}return t&&e.extend(i,t),this.each((function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&t.push(i.customSelector);var r=".fitvidsignore";i.ignore&&(r=r+", "+i.ignore);var n=e(this).find(t.join(","));(n=(n=n.not("object object")).not(r)).each((function(){var t=e(this);if(!(t.parents(r).length>0||"embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){t.css("height")||t.css("width")||!isNaN(t.attr("height"))&&!isNaN(t.attr("width"))||(t.attr("height",9),t.attr("width",16));var i=("object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height())/(isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10));if(!t.attr("name")){var n="fitvid"+e.fn.fitVids._count;t.attr("name",n),e.fn.fitVids._count++}t.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*i+"%"),t.removeAttr("height").removeAttr("width")}}))}))},e.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(e,t){t.addEventListener("DOMContentLoaded",(function(){t.querySelectorAll(".kg-gallery-image img").forEach((function(e){var t=e.closest(".kg-gallery-image"),i=e.attributes.width.value/e.attributes.height.value;t.style.flex=i+" 1 0%"}))}))}(window,document),function(e,t){var i=t.querySelector("link[rel=next]");if(i){var r=t.querySelector(".post-feed");if(r){var n=!1,o=!1,s=e.scrollY,a=e.innerHeight,d=t.documentElement.scrollHeight;e.addEventListener("scroll",h,{passive:!0}),e.addEventListener("resize",f),u()}}function l(){if(404===this.status)return e.removeEventListener("scroll",h),void e.removeEventListener("resize",f);this.response.querySelectorAll(".post-card").forEach((function(e){r.appendChild(t.importNode(e,!0))}));var s=this.response.querySelector("link[rel=next]");s?i.href=s.href:(e.removeEventListener("scroll",h),e.removeEventListener("resize",f)),d=t.documentElement.scrollHeight,n=!1,o=!1}function c(){if(!o)if(s+a<=d-300)n=!1;else{o=!0;var t=new e.XMLHttpRequest;t.responseType="document",t.addEventListener("load",l),t.open("GET",i.href),t.send(null)}}function u(){n||e.requestAnimationFrame(c),n=!0}function h(){s=e.scrollY,u()}function f(){a=e.innerHeight,d=t.documentElement.scrollHeight,u()}}(window,document),function(e,t){e.Casper||(e.Casper={}),e.Casper.stickyNavTitle=function(i){var r=t.querySelector(i.navSelector),n=t.querySelector(i.titleSelector),o=e.scrollY,s=!1;function a(){var t=n.getBoundingClientRect().top+e.scrollY,a=n.offsetHeight+35;o>=t+a?r.classList.add(i.activeClass):r.classList.remove(i.activeClass),s=!1}e.addEventListener("scroll",(function(){o=e.scrollY,function(){s||requestAnimationFrame(a);s=!0}()}),{passive:!0}),a()}}(window,document);
//# sourceMappingURL=casper.js.map