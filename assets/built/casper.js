"use strict";class basictable{constructor(t,e={}){this.tableSel=t,this.options={breakpoint:null,containerBreakpoint:null,contentWrap:!0,forceResponsive:!0,noResize:!1,tableWrap:!1,showEmptyCells:!1,header:!0,...e},null===this.options.breakpoint&&null===this.options.containerBreakpoint&&(this.options.breakpoint=568),this._getTables(),this._setup()}_getTables(){this.tables=document.querySelectorAll(this.tableSel)}_setup(){this.tables.forEach(e=>{e.setAttribute("data-bt-active",!0);const r=[];if(this.options.tableWrap){const t=document.createElement("div");t.classList.add("bt-wrapper"),e.parentNode.insertBefore(t,e),t.appendChild(e)}if(this.options.header){let t="";t=e.querySelectorAll("thead tr th").length?"thead th":e.querySelectorAll("tbody tr th").length?"tbody tr th":e.querySelectorAll("th").length?"tr:first th":"tr:first td",e.querySelectorAll(t).forEach(e=>{var i=parseInt(e.getAttribute("colspan"),10)||1,t=e.closest("tr"),s=[].indexOf.call(t.parentElement.children,t);r[s]||(r[s]=[]);for(let t=0;t<i;t++)r[s].push(e)}),e.querySelectorAll("tbody tr").forEach(t=>this._setupRow(t,r)),e.querySelectorAll("tfoot tr").forEach(t=>this._setupRow(t,r))}this.options.noResize||this._check(e)}),this.options.noResize||(this._tableResizeEvent=()=>this._resize(),window.addEventListener("resize",this._tableResizeEvent))}_setupRow(t,n){t.querySelectorAll(":scope > *").forEach(t=>{if(""!==t.innerHTML.trim()&&"&nbsp;"!==t.innerHTML||!this.options.showEmptyCells){var i=[].indexOf.call(t.parentElement.children,t);let e="";for(let t=0;t<n.length;t++){0!==t&&(e+=": ");var s=n[t][i];e+=s.textContent}t.setAttribute("data-th",e);const r=document.createElement("span");if(r.classList.add("bt-content"),this.options.contentWrap&&t.firstChild!==r)for(t.appendChild(r);t.firstChild!==r;)r.appendChild(t.firstChild)}else t.classList("bt-hide")})}_check(t){this.options.forceResponsive?null!==this.options.breakpoint&&window.innerWidth<=this.options.breakpoint||null!==this.options.containerBreakpoint&&t.parentElement.offsetWidth<=this.options.containerBreakpoint?this._start(t):this._end(t):(t.classList.remove("bt"),t.getBoundingClientRect().left+t.offsetWidth>t.parentElement.offsetWidth?this._start(t):this._end(t))}_start(t){t.classList.add("bt"),this.options.header||t.classList.add("bt--no-header"),this.options.tableWrap&&t.closest(".bt-wrapper").classList.add("active")}_end(t){t.classList.remove("bt","bt--no-header"),this.options.tableWrap&&t.closest(".bt-wrapper").classList.remove("active")}_resize(t){this.tables.forEach(t=>{t.getAttribute("data-bt-active")&&this._check(t)})}start(){this.tables.forEach(t=>{this._start(t)})}stop(){this.tables.forEach(t=>{this._end(t)})}restart(){this.destroy(),this._getTables(),this._setup()}destroy(){this.tables.forEach(t=>{if(t.getAttribute("data-bt-active")){t.classList.remove("bt","bt--no-header"),t.removeAttribute("data-bt-active");const e=t.querySelectorAll("td");e.forEach(t=>t.removeAttribute("data-th")),this.options.contentWrap&&e.forEach(t=>{var e=t.querySelector(".bt-content");e&&(t.innerHTML=e.innerHTML)}),this.options.tableWrap&&(t.parentNode.outerHTML=t.parentNode.innerHTML)}}),this.options.noResize||window.removeEventListener("resize",this._tableResizeEvent)}}!function(n){n.fn.fitVids=function(t){var e,i,r={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(e=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',e.appendChild(i.childNodes[1])),t&&n.extend(r,t),this.each(function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];r.customSelector&&t.push(r.customSelector);var s=".fitvidsignore";r.ignore&&(s=s+", "+r.ignore);t=n(this).find(t.join(","));(t=(t=t.not("object object")).not(s)).each(function(){var t,e,i=n(this);0<i.parents(s).length||"embed"===this.tagName.toLowerCase()&&i.parent("object").length||i.parent(".fluid-width-video-wrapper").length||(i.css("height")||i.css("width")||!isNaN(i.attr("height"))&&!isNaN(i.attr("width"))||(i.attr("height",9),i.attr("width",16)),t=("object"===this.tagName.toLowerCase()||i.attr("height")&&!isNaN(parseInt(i.attr("height"),10))?parseInt(i.attr("height"),10):i.height())/(isNaN(parseInt(i.attr("width"),10))?i.width():parseInt(i.attr("width"),10)),i.attr("name")||(e="fitvid"+n.fn.fitVids._count,i.attr("name",e),n.fn.fitVids._count++),i.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*t+"%"),i.removeAttr("height").removeAttr("width"))})})},n.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(t){t.addEventListener("DOMContentLoaded",function(){t.querySelectorAll(".kg-gallery-image img").forEach(function(t){var e=t.closest(".kg-gallery-image"),i=t.attributes.width.value,t=t.attributes.height.value;e.style.flex=i/t+" 1 0%"})})}((window,document)),function(e,i){var s,r,n,o,a,l,h,d;function c(){if(404===this.status)return e.removeEventListener("scroll",u),void e.removeEventListener("resize",f);this.response.querySelectorAll("article.post-card").forEach(function(t){r.appendChild(i.importNode(t,!0))});var t=this.response.querySelector("link[rel=next]");t?s.href=t.href:(e.removeEventListener("scroll",u),e.removeEventListener("resize",f)),d=i.documentElement.scrollHeight,a=o=!1}function t(){var t;a||(l+h<=d-n?o=!1:(a=!0,(t=new e.XMLHttpRequest).responseType="document",t.addEventListener("load",c),t.open("GET",s.href),t.send(null)))}function p(){o||e.requestAnimationFrame(t),o=!0}function u(){l=e.scrollY,p()}function f(){h=e.innerHeight,d=i.documentElement.scrollHeight,p()}i.getElementsByClassName("pagination").length||(!(s=i.querySelector("link[rel=next]"))||(r=i.querySelector(".post-feed"))&&(a=o=!(n=300),l=e.scrollY,h=e.innerHeight,d=i.documentElement.scrollHeight,e.addEventListener("scroll",u,{passive:!0}),e.addEventListener("resize",f),p()))}(window,document);
//# sourceMappingURL=casper.js.map